(this["webpackJsonpbullet-note"]=this["webpackJsonpbullet-note"]||[]).push([[0],{365:function(e,t,a){e.exports=a(456)},370:function(e,t,a){},371:function(e,t,a){},444:function(e,t,a){},456:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),o=a(18),c=a.n(o),i=(a(370),a(371),a(358)),l=a(30),u=a(19),g=a(295),m=a(484),f=a(485),d=a(208),E=a(146),b=a(35),v=a(32),p=a(16);!function(e){e.ADD_MESSAGE="ADD_MESSAGE",e.DELETE_MESSAGE="DELETE_MESSAGE",e.SET_MESSAGE_FROM_DB="SET_MESSAGE_FROM_DB",e.TOGGLE_MESSAGE_ISDONE="TOGGLE_MESSAGE_ISDONE",e.TOGGLE_MESSAGE_ISSTAR="TOGGLE_MESSAGE_ISSTAR",e.TOGGLE_MESSAGE_ISPIN="TOGGLE_MESSAGE_ISPIN",e.EDIT_MESSAGE="EDIT_MESSAGE",e.EDIT_IT="EDIT_IT"}(n||(n={}));var S,h=a(44),O=a(29);!function(e){e.DEFAULT="DEFAULT",e.URGENT="URGENT",e.TODO="TODO",e.REVIEW="REVIEW"}(S||(S={}));var y=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"removeSpaceInStr",value:function(e){return e.replace(/\s/g,"")}},{key:"makeBasicMessage",value:function(e){var t=e.tagList,a=e.createdAt,n=t,r=a?new Date(a):new Date;return 0===t.length&&(n=[this.defaultTag]),Object(v.a)({},e,{tagList:n,createdAt:r,dateTagList:[]})}},{key:"makeTodoStatus",value:function(e){return Object(v.a)({},e)}},{key:"getTagItem",value:function(e){var t=this.removeSpaceInStr(e);return{id:t,name:t}}},{key:"getTagListFromRawMessage",value:function(e){var t=this,a=e.match(this.tagReg);return a?a.map((function(e){return t.getTagItem(e)})):[]}},{key:"getMessageType",value:function(e){var t=e.match(this.todoReg);return e.match(this.reviewReg)?S.DEFAULT:t?S.TODO:void 0}},{key:"getRemovedTypeAndTagsMessage",value:function(e){var t=e;return t=(t=(t=t.replace(this.tagReg,"")).replace(this.todoReg,"")).replace(this.removeReviewPresetReg,"")}},{key:"convertRawMessageToMessageItem",value:function(e){var t=e.isDone,a=e.isPin,n=e.rawMessage,r=this.getMessageType(n),s=this.getTagListFromRawMessage(n),o=this.getRemovedTypeAndTagsMessage(n),c=this.makeBasicMessage(Object(v.a)({},e,{isPin:a,tagList:s,content:o})),i=this.makeTodoStatus({name:"",isDone:!!t});switch(r){case S.TODO:return{type:S.TODO,status:i,message:c};default:return{type:S.DEFAULT,status:i,message:c}}}}]),e}();y.todoReg=/(\[\]\s)?/,y.reviewReg=/(\*(\s)?)+([\u4E00-\u9FFF]|\w)+/g,y.removeReviewPresetReg=/(\*(\s))/g,y.tagReg=/#\w+(\s)?/g,y.defaultTag={id:"notDefinedTag",name:"#\u672a\u5206\u985e"};var L=y,T=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"convertMessageListToRawMessageList",value:function(e){return e.map((function(e){var t=void 0;return e.type===S.TODO&&(t=!!e.status.isDone),{id:e.message.id,isDone:t,rawMessage:e.message.rawMessage,createdAt:new Date(e.message.createdAt),isStared:e.message.isStared,isPin:e.message.isPin}}))}},{key:"setData",value:function(e){var t=this.convertMessageListToRawMessageList(e),a=JSON.stringify(t);localStorage.setItem("messageListLS",a)}},{key:"setDataFromRawData",value:function(e){var t=JSON.stringify(e);localStorage.setItem("messageListLS",t)}},{key:"getData",value:function(){var e=localStorage.getItem("messageListLS");return e?JSON.parse(e):[]}}]),e}(),j=function(e,t){var a=Object(p.a)(e.messageList);switch(t.type){case n.ADD_MESSAGE:var r=e.messageList,s=0===r.length?-1:Number(r.slice(-1)[0].message.id),o=String(s+1),c=L.convertRawMessageToMessageItem({id:o,rawMessage:t.payload.rawMessage});a=[].concat(Object(p.a)(e.messageList),[c]);break;case n.SET_MESSAGE_FROM_DB:a=t.payload.rawMessageFromDBList.map((function(e){return L.convertRawMessageToMessageItem(e)}));break;case n.DELETE_MESSAGE:var i=t.payload.id;a=e.messageList.filter((function(e){return i!==e.message.id}));break;case n.TOGGLE_MESSAGE_ISDONE:var l=t.payload,u=l.id,g=l.isDone,m=a.findIndex((function(e){return e.message.id===u}));-1!==m&&a[m].type===S.TODO&&(a[m]=Object(v.a)({},a[m],{status:Object(v.a)({},a[m].status,{isDone:g})}));break;case n.TOGGLE_MESSAGE_ISSTAR:var f=t.payload,d=f.id,E=f.isStar,b=a.findIndex((function(e){return e.message.id===d}));-1!==b&&(a[b]=Object(v.a)({},a[b],{message:Object(v.a)({},a[b].message,{isStared:E})}));break;case n.TOGGLE_MESSAGE_ISPIN:var h=t.payload,O=h.id,y=h.isPin,j=a.findIndex((function(e){return e.message.id===O}));-1!==j&&(a[j]=Object(v.a)({},a[j],{message:Object(v.a)({},a[j].message,{isPin:y})}));break;case n.EDIT_MESSAGE:var w=t.payload,M=w.id,k=w.newMessage,D=a.findIndex((function(e){return e.message.id===M}));if(-1!==D){var I=a[D].message.tagList.map((function(e){return e.id===L.defaultTag.id?"":e.name})).join(" ");a[D]=Object(v.a)({},a[D],{message:Object(v.a)({},a[D].message,{content:k,rawMessage:k+" "+I})}),console.log(a[D].message.tagList)}}return T.setData(a),a},w=Object(b.combineReducers)({messageList:j}),M=a(209),k=a.n(M),D={messageList:[]},I=Object(E.createContextValueFn)(D,w),C=Object(E.createContextStore)(D),A=k()(I,C),x=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],n=t[1];return{handleChange:Object(r.useCallback)((function(e){var t=e.target.value;n(t)}),[]),value:a,setVal:n}},G=a(490),F=a(483),_=function(e){var t=e.value,a=e.onChange,n=e.onSendMessage;return s.a.createElement(d.a,{display:"flex",paddingTop:1},s.a.createElement(G.a,{autoFocus:!0,variant:"outlined",fullWidth:!0,value:t,onChange:a}),s.a.createElement(d.a,{paddingLeft:1},s.a.createElement(F.a,{onClick:n},"send")))},R=a(211),P=Object(b.connectCtx)(C)(void 0,(function(e){return{addMessageFn:function(t){var a=function(e){return{type:n.ADD_MESSAGE,payload:{rawMessage:e}}}(t);e(a)}}}))((function(e){var t=x(),a=t.value,n=t.setVal,o=t.handleChange,c=Object(r.useCallback)((function(){a.length>0&&(e.addMessageFn(a),n(""))}),[e,n,a]);return Object(R.useFnsByKeyCode)({lastIndex:0,confirmFn:c,escapeFn:function(){}}),s.a.createElement(_,{value:a,onChange:o,onSendMessage:c})})),N=Object(b.connectCtx)(C)((function(e){return{messageList:e.messageList}}))((function(e){var t,a=T.getData(),n=(new Date).toLocaleString();return s.a.createElement(F.a,{href:(t=a,"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t)))),download:"bullet-note-backup-".concat(n,".json")},"download backup")})),B=function(e){return function(t){var a=new FileReader;t.target.files&&t.target.files.length>0&&(console.log(t.target.files[0]),a.readAsText(t.target.files[0])),a.addEventListener("load",(function(t){if(t.target&&t.target.result&&"string"===typeof t.target.result){var a=JSON.parse(t.target.result);console.log(a),e&&e(a)}}))}},U=function(){return s.a.createElement("input",{type:"file",onChange:B()})},W=a(491),V=a(482),J=a(488),H=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"regDateToString",value:function(e){return new Date(e).toLocaleDateString()}},{key:"checkTwoDateIsSame",value:function(e,t){return!(!e||!t)&&this.regDateToString(e)===this.regDateToString(t)}},{key:"convertToMessageWithDateList",value:function(e){for(var t="",a=-1,n=[{date:t,messageList:[]}],r=0;r<e.length;r++){var s=e[r],o=s.message.createdAt;this.checkTwoDateIsSame(o,t)||(t=o,a+=1),n[a]={date:t,messageList:[].concat(Object(p.a)(n[a]?n[a].messageList:[]),[s])}}return n}}]),e}(),z=/^(\d+\/)/g,q=function(e){var t=new Date(e.date).toLocaleDateString().replace(z,"");return s.a.createElement(V.a,{variant:"h5"},t)},K=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"checkNewStrIsInStrList",value:function(e,t){return e.includes(t)}},{key:"checkNewStrListIsInStrList",value:function(e,t){if(0===t.length)return!0;for(var a=0;a<t.length;a++){var n=t[a];if(this.checkNewStrIsInStrList(e,n))return!0}return!1}},{key:"addNewStrToStrList",value:function(e,t){return this.checkNewStrIsInStrList(e,t)?e:[].concat(Object(p.a)(e),[t])}},{key:"addNewStrListToStrList",value:function(e,t){for(var a=e,n=0;n<t.length;n++){var r=t[n];a=this.addNewStrToStrList(a,r)}return a}},{key:"getTagNamesFromMessage",value:function(e){return e.message.tagList.map((function(e){return e.name}))}},{key:"getTagNoteBlockObj",value:function(e){for(var t=[],a={},n=0;n<e.length;n++){var r=e[n],s=this.getTagNamesFromMessage(r);t=this.addNewStrListToStrList(t,s);this.checkNewStrListIsInStrList(t,s);if(s.length>0){var o=s[0];a[o]?a[o]=Object(v.a)({},a[o],{messageList:[].concat(Object(p.a)(a[o].messageList),[r])}):a[o]={tagTitle:o,messageList:[r]}}}return a}}]),e}(),Z=a(492),Q=a(489),$=a(10),X=a(461),Y=a(303),ee=a(304),te=function(e,t){var a=Object(r.useState)(!!e),n=Object(u.a)(a,2),s=n[0],o=n[1],c=Object(r.useCallback)((function(){o((function(e){return!e}))}),[]);return Object(r.useEffect)((function(){t&&t(s)}),[s]),Object(r.useEffect)((function(){o(!!e)}),[e]),{toggle:s,setToggle:o,handleToggle:c}},ae=function(e){var t=e.onChange,a=e.isStared,n=te(a,t),r=n.toggle,o=n.handleToggle;return s.a.createElement(d.a,{style:{cursor:"pointer"},onClick:o},r?s.a.createElement(Y.a,null):s.a.createElement(ee.a,null))},ne=a(299),re=a(300),se=function(e){var t=e.isPin,a=e.onChange,n=te(t,a),r=n.toggle,o=n.handleToggle;return s.a.createElement(d.a,{style:{cursor:"pointer"},onClick:o},r?s.a.createElement(ne.a,null):s.a.createElement(re.a,null))},oe=a(298),ce=function(e){return s.a.createElement(d.a,null,s.a.createElement(F.a,{onClick:e.onDelete},s.a.createElement(oe.a,null)))},ie=a(302),le=Object(g.a)((function(e){return{root:Object($.a)({},e.breakpoints.down("md"),{}),morePart:{position:"relative",cursor:"pointer",opacity:.8,"& > div":{position:"absolute",top:-30,right:0,width:110,display:"none"},"&:hover > div":{display:"flex"}}}})),ue=function(e){var t=le(),a=e.message,n=a.isStared,r=a.isPin;return s.a.createElement(d.a,{position:"relative",display:"flex",alignItems:"center"},s.a.createElement(d.a,{className:t.morePart},s.a.createElement(ie.a,null),s.a.createElement(X.a,null,s.a.createElement(d.a,{display:"flex",alignItems:"center"},s.a.createElement(ce,{onDelete:e.onDelete}),s.a.createElement(ae,{isStared:n,onChange:e.onStarMessage}),s.a.createElement(se,{isPin:r,onChange:e.onPinMessage})))))},ge=Object(g.a)((function(e){return{root:{cursor:"pointer",backgroundColor:"#aff",borderRadius:e.spacing(.5),"&:hover":{opacity:.8}}}})),me=function(e){var t=ge();return s.a.createElement(d.a,{className:t.root,paddingLeft:.5,paddingRight:.5},e.tagName)},fe=function(e){return s.a.createElement(d.a,{display:"flex",paddingLeft:.5},e.tagList.map((function(e,t){return s.a.createElement(d.a,{paddingRight:.5},s.a.createElement(me,{key:t,tagName:e.name}))})))},de=function(e){var t=e.message,a=t.content,n=t.tagList,r=t.createdAt,o=s.a.useState(!1),c=Object(u.a)(o,2),i=c[0],l=c[1];return s.a.createElement(d.a,{display:"flex",alignItems:"center",onDoubleClick:function(){return l(!0)},onBlur:function(){return l(!1)}},i?s.a.createElement(G.a,{fullWidth:!0,onChange:e.onEditMessage,autoFocus:!0,value:a}):s.a.createElement(V.a,{variant:"subtitle1"},a),s.a.createElement(fe,{tagList:n}),s.a.createElement(V.a,{variant:"body1",color:"textSecondary"},function(e){if("string"===typeof e)return e;var t=e.getHours(),a=e.getMinutes();return"".concat(t,":").concat(a)}(r)))},Ee=function(e){return s.a.createElement(d.a,{display:"flex",width:"100%"},s.a.createElement(Q.a,{container:!0},s.a.createElement(Q.a,{item:!0,xs:11},s.a.createElement(de,e)),s.a.createElement(Q.a,{item:!0,xs:1},s.a.createElement(ue,e))))},be=Object(b.connectCtx)(C)(void 0,(function(e){return{editActionFn:function(t,a){var r=function(e,t){return{type:n.EDIT_MESSAGE,payload:{id:e,newMessage:t}}}(t,a);e(r)},starActionFn:function(t,a){var r=function(e,t){return{type:n.TOGGLE_MESSAGE_ISSTAR,payload:{id:e,isStar:t}}}(t,a);e(r)},pinActionFn:function(t,a){var r=function(e,t){return{type:n.TOGGLE_MESSAGE_ISPIN,payload:{id:e,isPin:t}}}(t,a);e(r)}}}))((function(e){var t=e.editActionFn,a=e.starActionFn,n=e.pinActionFn,o=e.message.id,c=Object(r.useCallback)((function(e){var a=e.target.value;t(o,a)}),[t,o]),i=Object(r.useCallback)((function(e){a(o,e)}),[o,a]),l=Object(r.useCallback)((function(e){n(o,e)}),[o,n]);return s.a.createElement(Ee,Object.assign({},e,{onPinMessage:l,onStarMessage:i,onEditMessage:c}))})),ve=Object(g.a)((function(e){return{root:{"&:hover":{backgroundColor:"#eee"}}}})),pe=function(e){var t=ve();return s.a.createElement(d.a,{display:"flex",alignItems:"center",className:t.root},e.children,s.a.createElement(be,e))},Se=Object(b.connectCtx)(C)(void 0,(function(e){return{onDelete:function(t){var a=function(e){return{type:n.DELETE_MESSAGE,payload:{id:e}}}(t);e(a)}}}))((function(e){var t=e.message,a=e.onDelete,n=t.id,o=Object(r.useCallback)((function(){window.confirm("Are you sure delete?")&&a(n)}),[n,a]);return s.a.createElement(pe,Object.assign({},e,{onDelete:o}))})),he=function(e){return s.a.createElement(Se,e,s.a.createElement(Z.a,{color:"primary",onChange:e.onToggleTodo,checked:!!e.status.isDone}))},Oe=Object(b.connectCtx)(C)(void 0,(function(e){return{toggleTodoActionFn:function(t,a){var r=function(e,t){return{type:n.TOGGLE_MESSAGE_ISDONE,payload:{id:e,isDone:t}}}(t,a);e(r)}}}))((function(e){var t=e.message,a=e.toggleTodoActionFn,n=t.id,o=Object(r.useCallback)((function(e,t){return a(n,t)}),[n,a]);return s.a.createElement(he,Object.assign({},e,{onToggleTodo:o}))})),ye=a(301),Le=function(e){return s.a.createElement(Se,e,s.a.createElement(ye.a,null))},Te=function(e){var t=e.index,a=e.messageItemProps;switch(a.type){case S.TODO:return s.a.createElement(Oe,Object.assign({key:t},a));case S.DEFAULT:return s.a.createElement(Le,Object.assign({key:t},a));default:return null}},je=function(e){return s.a.createElement(d.a,{paddingLeft:1.5},s.a.createElement(V.a,{variant:"h6",color:"textPrimary"},e.tagTitle),s.a.createElement(d.a,{paddingLeft:1.5},e.messageList.map((function(e,t){return Te({index:t,messageItemProps:e})}))))},we=function(e){return s.a.createElement(je,e)},Me=Object(g.a)((function(e){return{root:{borderRadius:4,borderColor:function(e){return e.selected?"#ddd":"transparent"},borderWidth:2,borderStyle:"solid"}}})),ke=function(e){var t=e.date,a=e.messageList,n=Me(e),r=K.getTagNoteBlockObj(a),o=Object.keys(r);return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{padding:.5,paddingBottom:2,className:n.root},s.a.createElement(d.a,{paddingBottom:1},s.a.createElement(q,{date:t})),o.map((function(e,t){return s.a.createElement(we,Object.assign({key:t},r[e]))}))))},De=function(e){return H.checkTwoDateIsSame(new Date,e)},Ie=a(297),Ce=function(e){var t=e.messageList,a=e.moveToBottomFn;if(0===t.length)return s.a.createElement(V.a,{variant:"h5",color:"textSecondary"},"No notes yet :>");var n=H.convertToMessageWithDateList(t);return s.a.createElement(d.a,{position:"relative"},s.a.createElement(d.a,null,n.map((function(e,t){return s.a.createElement(ke,Object.assign({key:t},e,{selected:De(e.date)}))}))),s.a.createElement(d.a,{style:{position:"fixed",bottom:80,right:20}},s.a.createElement(J.a,{size:"small",onClick:a},s.a.createElement(Ie.a,null))))},Ae=function(){var e=Object(r.useRef)(null),t=Object(r.useCallback)((function(){e.current&&e.current.scrollIntoView({block:"end"})}),[]);return{ref:e,handleScrollToView:t}},xe=function(e){var t=Ae(),a=t.ref,n=t.handleScrollToView;return s.a.useEffect((function(){n()}),[e.messageList.length,n]),s.a.createElement(W.a,{rootRef:a},s.a.createElement(Ce,Object.assign({},e,{moveToBottomFn:n})))},Ge=a(487),Fe=function(e){var t=e.isShowPinMessageList,a=e.toggleShowPinMessageListFn,n=function(e){return e.filter((function(e){return e.message.isPin}))}(e.messageList);return s.a.createElement(X.a,{elevation:2},s.a.createElement(d.a,{display:"flex",alignItems:"center",style:{position:"sticky",top:0,backgroundColor:"#fff",zIndex:100}},s.a.createElement(V.a,null,"Pin Messages"),s.a.createElement(F.a,{onClick:a},t?"Hide":"Show")),s.a.createElement(d.a,{style:{display:t?"block":"none"}},n.map((function(e,t){return Te({index:t,messageItemProps:e})}))),s.a.createElement(Ge.a,null))},_e=function(e){var t=te(),a=t.toggle,n=t.handleToggle;return s.a.createElement(Fe,Object.assign({},e,{isShowPinMessageList:a,toggleShowPinMessageListFn:n}))},Re=Object(g.a)((function(){return{pinMessageListPart:{position:"sticky",top:0,maxHeight:200,overflow:"auto",zIndex:1e3,boxShadow:"0px 10px 10px rgba(0, 0, 0, 0.07)"},root:{}}})),Pe=function(e){var t=Re();return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{className:t.pinMessageListPart},s.a.createElement(_e,{messageList:e.messageList})),s.a.createElement(d.a,null,s.a.createElement(N,null),s.a.createElement(U,null)),s.a.createElement(xe,e))},Ne=Object(b.connectCtx)(C)((function(e){return{messageList:e.messageList}}),(function(e){return{setMessageFromDB:function(){var t=T.getData();console.log(t);var a,r=(a=t,{type:n.SET_MESSAGE_FROM_DB,payload:{rawMessageFromDBList:a}});e(r)}}}))((function(e){var t=e.setMessageFromDB;return s.a.useEffect((function(){t()}),[t]),s.a.createElement(Pe,e)})),Be=(a(444),a(356)),Ue=a.n(Be).a.initializeApp({apiKey:"AIzaSyAZIVD5abF8A49qiz7QI1cqDner4MGtZPM",authDomain:"bullet-note.firebaseapp.com",databaseURL:"https://bullet-note.firebaseio.com",projectId:"bullet-note",storageBucket:"bullet-note.appspot.com",messagingSenderId:"373183189354",appId:"1:373183189354:web:7a33552c9febc150c7d513",measurementId:"G-SPRTKCHE2L"}),We=Ue.database(),Ve=function(e){return"/".concat(e,"/bullet-note")},Je=We,He=function(e){var t=e.userId,a=e.successCb,n=e.errorCb;if(t){var r=Ve(t);Je.ref(r).once("value").then((function(e){var t=e.val();t?(console.log("snapshot from firebase: ",t),a&&a(t)):n&&n({message:"User not found."})})).catch((function(e){n&&n(e)}))}else n&&n({message:"Please check user id again."})},ze=function(e){Ue.auth().onAuthStateChanged((function(t){var a=!1;console.log(t),a=!!t,e&&e(a,t)}))},qe=function(e){var t=e.userId,a=e.data,n=e.successCb,r=e.errorCb;if(t){ze((function(e,t){t?Je.ref(Ve(t.uid)).set(a).finally((function(){n&&n()})).catch((function(e){r&&r(e)})):r&&r({message:"Please Login."})}))}else r&&r({message:"Please Login."})},Ke=Object(b.connectCtx)(C)((function(e){return{messageList:e.messageList}}))((function(e){var t=e.messageList,a=Object(l.g)().userId,n=JSON.stringify(t),o=Object(r.useState)(!1),c=Object(u.a)(o,2),i=c[0],g=c[1],f=Object(r.useState)(),d=Object(u.a)(f,2),E=d[0],b=d[1],v=Object(r.useState)(!1),p=Object(u.a)(v,2),S=p[0],h=p[1],O=Object(r.useCallback)((function(){g(!1),h(!0)}),[]),y=Object(r.useCallback)((function(){if(!S){console.log(t);var e=T.getData();g(!0),qe({userId:a,data:e,successCb:O,errorCb:function(e){b(e),g(!1)}})}}),[O,t,S,a]);return Object(r.useEffect)((function(){var e=setTimeout((function(){y()}),5e3);return function(){clearTimeout(e)}}),[y]),Object(r.useEffect)((function(){h(!1)}),[n]),i?s.a.createElement(m.a,null):E?s.a.createElement(V.a,null,"Check your login and network.It is off-line mode copy now."):s.a.createElement(s.a.Fragment,null,s.a.createElement(F.a,{onClick:y},"Sync"),S&&"Sync success")})),Ze=function(e){var t=e.isOffline;return s.a.createElement(d.a,{display:"flex",alignItems:"center",justifyContent:"space-between",height:32,style:{backgroundColor:"#bca1ed"}},s.a.createElement(Ke,null),t&&s.a.createElement(d.a,{display:"flex",alignItems:"center"},s.a.createElement(V.a,{color:"textSecondary"},"Offline Mode Now "),s.a.createElement(F.a,{color:"primary",href:"/"},"Online-mode")),!t&&s.a.createElement(F.a,{color:"primary",href:"/bullet-note/".concat("off-line-mode")},"Offline-mode"))},Qe=function(e){var t=e.errorMessage;return s.a.createElement(d.a,null,s.a.createElement(V.a,null,t),s.a.createElement(F.a,{href:"/"},"Home"))},$e=Object(g.a)((function(e){return{root:{"&::-webkit-scrollbar":{width:8}},notePart:{maxHeight:"calc(100vh - 80px - ".concat(32,"px)"),overflow:"auto"},inputPart:{position:"fixed",bottom:e.spacing(1),left:e.spacing(1),right:e.spacing(1)}}})),Xe=function(){var e=$e(),t=Object(l.g)().userId;console.log(t);var a=s.a.useState(!0),n=Object(u.a)(a,2),o=n[0],c=n[1],i=s.a.useState({message:""}),g=Object(u.a)(i,2),E=g[0],b=g[1],v=s.a.useState(!1),p=Object(u.a)(v,2),S=p[0],h=p[1],O=Object(r.useCallback)((function(e){He({userId:e,successCb:function(e){T.setDataFromRawData(e),c(!1)},errorCb:function(e){b(e),c(!1)}})}),[]);return s.a.useEffect((function(){var e=T.getData(),a=e&&e.length>0;"off-line-mode"===t&&a?(c(!1),h(!0)):O(t)}),[O,t]),o?s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,null),"Loading..."):E.message?s.a.createElement(Qe,{errorMessage:E.message}):s.a.createElement(A,{customInitState:{}},s.a.createElement(Ze,{isOffline:S}),s.a.createElement(f.a,null,s.a.createElement(d.a,{className:e.root},s.a.createElement(d.a,{className:e.notePart},s.a.createElement(Ne,null)),s.a.createElement(d.a,{className:e.inputPart},s.a.createElement(P,null)))))},Ye=function(){var e=Object(l.f)();return s.a.useEffect((function(){ze((function(t,a){var n="";a?(n=a.uid,e.push("/bullet-note/".concat(n))):e.push("/".concat("log-in"))}))}),[e]),s.a.createElement(d.a,null,"Redirecting...")};var et=function(e){var t=Object(r.useState)(e),a=Object(u.a)(t,2),n=a[0],s=a[1];return{form:n,handleChangeForm:Object(r.useCallback)((function(e){e.persist(),s(function(e){return function(t){console.log(e.target);var a=e.target,n=a.id,r=a.value,s=t[n],o=s.validateFn&&s.validateFn(r),c=s.getMessageFn&&s.getMessageFn(r);return Object(v.a)({},t,Object($.a)({},n,Object(v.a)({},s,{value:r,error:o,message:c})))}}(e))}),[])}},tt=function(e){var t=e.email,a=e.password,n=e.successCb,r=e.errorCb;return a?t?(r({message:""}),void Ue.auth().signInWithEmailAndPassword(t,a).then((function(e){var t=e.user;t&&(console.log(t),n&&n(t.uid))})).finally((function(){})).catch((function(e){r(e)}))):r({message:"Email is required!"}):r({message:"Password is required!"})},at=function(){var e=Object(l.f)(),t=s.a.useState({message:""}),a=Object(u.a)(t,2),n=a[0],o=a[1],c=et({email:{label:"email",value:""},password:{label:"password",value:""}}),i=c.form,g=c.handleChangeForm,m=Object(r.useCallback)((function(){console.log(i),tt({email:i.email.value,password:i.password.value,successCb:function(t){return e.push("/bullet-note/".concat(t))},errorCb:o})}),[i,e]);return s.a.createElement(f.a,null,s.a.createElement(d.a,{padding:1,textAlign:"center"},s.a.createElement(d.a,{paddingBottom:1,textAlign:"center"},s.a.createElement(G.a,{id:"email",name:"email",variant:"outlined",type:"email",label:"email",onChange:g})),s.a.createElement(d.a,{paddingBottom:1,textAlign:"center"},s.a.createElement(G.a,{id:"password",name:"password",type:"password",variant:"outlined",label:"password",onChange:g})),n.message&&s.a.createElement(V.a,{color:"error"},n.message),s.a.createElement(F.a,{variant:"contained",color:"primary",onClick:m},"Log in")))},nt=at,rt=function(){return s.a.createElement(d.a,{textAlign:"center"},s.a.createElement(V.a,{variant:"h5"},"Page Not Found, Try Links below"),s.a.createElement(F.a,{href:"/",color:"primary",variant:"outlined"},"Home"))},st=function(){return s.a.createElement(i.a,null,s.a.createElement(l.c,null,s.a.createElement(l.a,{exact:!0,path:"/",component:Ye}),s.a.createElement(l.a,{exact:!0,path:"/".concat("log-in"),component:nt}),s.a.createElement(l.a,{exact:!0,path:"/bullet-note/:userId",component:Xe}),s.a.createElement(l.a,{component:rt})))};var ot=function(){return s.a.createElement(st,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[365,1,2]]]);
//# sourceMappingURL=main.b6af74bc.chunk.js.map